Phase 5: Non-null assertion remediation & CI fixes
=================================================

Summary
-------
- This PR summarizes recent work that removed non-null assertions, added runtime guards, and fixed CI workflow issues so the Phase 5 infra validation can run successfully in CI.
- The changes have already been merged to `main` (see merged PRs listed below). This summary PR exists so you can review and merge a human-readable changelog if desired.

Merged PRs
----------
- PR #9 — chore(ci): enable manual Phase 5 infra dispatch + non-null fixes
- PR #10 — ci(workflow): remove vitest unsupported flags from Phase5 tests
- PR #11 — ci: use Node.js 20 for Phase5 CI (fix vitest/vite)

Key file changes
----------------
- Modified (low-risk) replacements to remove `!` non-null assertions:
  - `src/platform/streaming/StreamingService.ts`
  - `src/platform/parallel/ResultAggregator.ts`
  - `src/platform/monitoring/DashboardService.ts`
  - `src/platform/github/permissions.ts`
  - `src/platform/documentation/keyword-search.ts`
  - `src/platform/ai/gateway-client.ts`
  - `src/endpoints/monitoring.ts`
  - `src/containers/server.ts`
- Added runtime guard and tests for high-risk env binding:
  - `src/utils/guards.ts` (new)
  - `src/platform/documentation/indexer.ts` (updated to use guard)
  - `tests/guards.spec.ts` (new)
- CI workflow fixes:
  - `.github/workflows/phase5-infra.yml` — added `workflow_dispatch`, removed unsupported `--runInBand` test flags, upgraded Node to 20

Verification
------------
- Local: `npm run type-check` — PASS
- Local: `npm test` — 369 tests passed
- CI: `phase5-infra.yml` run on `main` — SUCCESS (tests passed)

Notes
-----
- The code changes are intentionally minimal and conservative: prefer local runtime checks and small type-narrowing over broad refactors.
- If you want a single PR containing code changes for manual review prior to merge (instead of merging directly to `main`), I can create a review PR that bundles the code diffs instead of only a summary.

Review actions
--------------
- Review this summary and merged PR links.
- If you want, I can open a single-code PR that groups the source edits for an earlier review step (before merge). Reply with which option you prefer.

— Automation
—
Generated by automation on behalf of the repo maintainers.
